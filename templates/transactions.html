{% extends "base.html" %}

{% block title %}Transactions - Payment Gateway{% endblock %}

{% block heading %}Transaction History{% endblock %}
{% block subheading %}View all processed transactions{% endblock %}

{% block extra_css %}
<style>
    .transactions-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }
    
    .transactions-table th {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 15px;
        text-align: left;
        font-weight: 600;
        font-size: 14px;
    }
    
    .transactions-table td {
        padding: 15px;
        border-bottom: 1px solid #eee;
        font-size: 14px;
    }
    
    .transactions-table tr:hover {
        background-color: #f8f9fa;
    }
    
    .status-badge {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
    }
    
    .status-success {
        background-color: #d4edda;
        color: #155724;
    }
    
    .status-pending {
        background-color: #fff3cd;
        color: #856404;
    }
    
    .status-failed {
        background-color: #f8d7da;
        color: #721c24;
    }
    
    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #999;
    }
    
    .empty-state svg {
        margin-bottom: 20px;
    }
    
    .transaction-id {
        font-family: monospace;
        background: #f8f9fa;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
    }
    
    @media (max-width: 768px) {
        .transactions-table {
            font-size: 12px;
        }
        
        .transactions-table th,
        .transactions-table td {
            padding: 10px 8px;
        }
        
        .transaction-id {
            font-size: 10px;
        }
    }
</style>
{% endblock %}

{% block content %}
{% if transactions %}
<div style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
    <div>
        <strong id="transaction-count">{{ transactions|length }}</strong> transaction(s) found
    </div>
    <a href="/payment" class="btn" id="new-transaction-btn" style="padding: 8px 20px; font-size: 14px;">New Payment</a>
</div>

<div style="overflow-x: auto;">
    <table class="transactions-table" id="transactions-table">
        <thead>
            <tr>
                <th>Transaction ID</th>
                <th>Cardholder</th>
                <th>Card</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Date & Time</th>
            </tr>
        </thead>
        <tbody>
            {% for transaction in transactions|reverse %}
            <tr class="transaction-row">
                <td><span class="transaction-id">{{ transaction.transaction_id }}</span></td>
                <td class="cardholder-name">{{ transaction.cardholder_name }}</td>
                <td class="card-info">â€¢â€¢â€¢â€¢ {{ transaction.card_last_four }}</td>
                <td class="amount" style="font-weight: 700; color: #4caf50;">${{ "%.2f"|format(transaction.amount) }}</td>
                <td>
                    <span class="status-badge status-{{ transaction.status }}">
                        {{ transaction.status }}
                    </span>
                </td>
                <td class="timestamp">{{ transaction.timestamp }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div style="margin-top: 30px; text-align: center;">
    <a href="/" class="btn btn-secondary" id="back-home-btn">Back to Home</a>
</div>
{% else %}
<div class="empty-state">
    <svg width="80" height="80" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="45" fill="#f0f0f0"/>
        <text x="50" y="65" font-size="50" text-anchor="middle" fill="#999">ðŸ“‹</text>
    </svg>
    <h3 style="color: #666; margin-bottom: 10px;">No Transactions Yet</h3>
    <p style="color: #999; margin-bottom: 30px;">You haven't processed any payments yet.</p>
    <a href="/payment" class="btn" id="first-payment-btn">Make Your First Payment</a>
</div>
{% endif %}
{% endblock %}
